# main.py
# Streamlit MBTI -> 취미 추천 웹앱
import random
import textwrap
import time
import streamlit as st

st.set_page_config(
    page_title="MBTI 취미 추천기 🎯",
    page_icon="🎯",
    layout="wide",
    initial_sidebar_state="expanded"
)

# ---------------------------
# 스타일 & 애니메이션 (CSS)
# ---------------------------
st.markdown("""
<style>
/* 배경 그라데이션 */
.stApp {
  background: radial-gradient(1000px 600px at 10% 0%, #fff6e5 0%, #ffe9f0 35%, #eef6ff 70%, #ffffff 100%);
}
/* 메인 헤더 반짝임 */
.glow {
  font-weight: 800;
  font-size: clamp(28px, 4vw, 48px);
  letter-spacing: 0.4px;
  text-align: center;
  line-height: 1.15;
  animation: glow 3s ease-in-out infinite;
}
@keyframes glow {
  0%   { text-shadow: 0 0 0px rgba(255, 105, 180, 0.25); }
  50%  { text-shadow: 0 0 24px rgba(255, 105, 180, 0.45); }
  100% { text-shadow: 0 0 0px rgba(255, 105, 180, 0.25); }
}
/* 카드 레이아웃 */
.card {
  border-radius: 20px;
  padding: 18px 18px 16px 18px;
  background: rgba(255,255,255,0.75);
  backdrop-filter: blur(6px);
  box-shadow: 0 10px 26px rgba(0,0,0,0.08);
  border: 1px solid rgba(255,255,255,0.8);
  transition: transform .2s ease, box-shadow .2s ease;
}
.card:hover {
  transform: translateY(-4px);
  box-shadow: 0 16px 36px rgba(0,0,0,0.12);
}
.badge {
  display: inline-flex;
  gap: 6px;
  align-items: center;
  padding: 6px 10px;
  border-radius: 999px;
  background: #f6f8ff;
  border: 1px solid #e9edff;
  font-size: 13px;
  margin-right: 8px;
}
.pill {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 999px;
  background: #fff7ec;
  border: 1px dashed #ffd9a8;
  font-size: 13px;
}
.small {
  opacity: .8;
  font-size: 13px;
}
.hobby {
  font-weight: 700; font-size: 18px;
}
.hr {
  height: 1px; background: linear-gradient(90deg, rgba(0,0,0,0), rgba(0,0,0,.08), rgba(0,0,0,0));
  margin: 8px 0 12px 0;
}
.footer-note {
  text-align:center; opacity:.7; font-size:12px; margin-top: 18px;
}
.sparkle {
  animation: pop 600ms ease forwards;
  transform-origin: center;
}
@keyframes pop {
  0% { transform: scale(.9) rotate(-2deg); opacity: .0; }
  60% { transform: scale(1.05) rotate(2deg); opacity: 1; }
  100% { transform: scale(1) rotate(0deg); opacity: 1; }
}
</style>
""", unsafe_allow_html=True)

# ---------------------------
# 데이터: MBTI별 추천 취미
# (각 항목: (이름, 설명, 태그리스트))
# ---------------------------
MBTI_HOBBIES = {
    "INTJ": [
        ("장기 전략 보드게임 ♟️", "복잡한 규칙을 구조화하고 최적 전략을 찾는 과정이 두뇌를 간질간질하게 해요.", ["전략", "몰입", "두뇌"]),
        ("데이터 분석 프로젝트 📊", "오픈데이터로 가설 세우고 인사이트 뽑기—문제 해결 욕구 충족!", ["솔로", "지적", "결과물"]),
        ("건축/도시 리서치 🏙️", "미학+구조를 함께 보는 탐구형 취미.", ["리서치", "장기", "미니멀"])
    ],
    "INTP": [
        ("오픈소스 기여 💻", "새 아이디어 실험하고 구조를 깔끔히 다듬는 데 최적.", ["탐구", "문제해결", "원격"]),
        ("전자공작/아두이노 🔧", "만들면서 배우는 하드웨어 세계.", ["메이커", "실험", "손맛"]),
        ("퍼즐 게임/수수께끼 🧩", "논리의 즐거움을 무한 반복!", ["두뇌", "솔로", "몰입"])
    ],
    "ENTJ": [
        ("사이드 비즈니스 설계 🚀", "시장조사→MVP→피드백—성과 지향 ENTJ의 무대.", ["리더십", "실전", "전략"]),
        ("크로스핏/서킷 트레이닝 🏋️", "측정 가능한 성장과 경쟁심을 자극.", ["에너지", "목표", "기록"]),
        ("디베이트 클럽 🎤", "논리 전개와 설득의 쾌감.", ["사회", "표현", "경쟁"])
    ],
    "ENTP": [
        ("해커톤/아이디어톤 🧠⚡", "새로운 조합, 빠른 프로토타이핑!", ["창의", "팀", "속도"]),
        ("팟캐스트 제작 🎙️", "끝없는 호기심을 콘텐츠로.", ["대화", "실험", "확장"]),
        ("매직/마술 배우기 🪄", "상식을 비틀며 사람들을 놀라게!", ["퍼포먼스", "서프라이즈", "몰입"])
    ],
    "INFJ": [
        ("에세이/시 쓰기 ✍️", "내면의 서사를 섬세하게 언어로.", ["감성", "표현", "치유"]),
        ("명상 & 요가 🧘", "심리적 균형과 통찰을 위한 공간.", ["웰니스", "루틴", "평온"]),
        ("북클럽 운영 📚", "가치와 의미를 함께 나누기.", ["공감", "대화", "깊이"])
    ],
    "INFP": [
        ("수채화/일러스트 🎨", "감정의 색을 종이에 번지우기.", ["감성", "몰입", "창작"]),
        ("싱어송라이트 ✨🎶", "작사/작곡으로 자기표현 MAX.", ["표현", "솔로", "음악"]),
        ("자연 속 산책 기록 🌿", "감상을 글/사진으로 아카이빙.", ["치유", "마음챙김", "루틴"])
    ],
    "ENFJ": [
        ("커뮤니티 프로젝트 🧩", "사람을 연결해 의미를 만드는 기획.", ["리더십", "사회", "임팩트"]),
        ("댄스 클래스 💃", "팀워크+표현력+무대 경험.", ["퍼포", "운동", "에너지"]),
        ("멘토링/튜터링 📐", "성장 돕기에서 오는 보람.", ["도움", "소통", "피드백"])
    ],
    "ENFP": [
        ("여행 브이로그 ✈️📹", "새로움 × 스토리텔링 폭발!", ["모험", "콘텐츠", "자유"]),
        ("즉흥 연기/코미디 🎭", "재치와 에너지를 무대에서!", ["유머", "퍼포", "팀"]),
        ("보드게임 모임 주최 🎲", "사람 모으고 분위기 메이킹.", ["커뮤니티", "즐거움", "리드"])
    ],
    "ISTJ": [
        ("모형 제작(프라모델) 🛠️", "정밀함과 완성의 성취감.", ["정확", "장기", "집중"]),
        ("가계부/재무 다이어리 📒", "숫자로 삶을 정돈.", ["기록", "루틴", "목표"]),
        ("정원 가꾸기 🌱", "계획·관리·성장의 교과서.", ["자연", "차분", "관리"])
    ],
    "ISFJ": [
        ("베이킹 🍰", "정성→결과로 이어지는 힐링.", ["돌봄", "디테일", "공유"]),
        ("스마트폰 사진 인화/앨범 📷", "추억 큐레이션 장인.", ["기록", "따뜻함", "정리"]),
        ("캘리그래피 ✒️", "손글씨의 사려 깊음.", ["감성", "집중", "미학"])
    ],
    "ESTJ": [
        ("러닝 & 기록 앱 🏃‍♂️", "수치로 명확한 성장 확인!", ["목표", "성과", "리듬"]),
        ("이벤트 운영/스태프 🤝", "기획·실행력 발휘의 장.", ["조직", "리더십", "현장"]),
        ("DIY 인테리어 🧰", "프로젝트 드라이브에 딱.", ["실용", "완성", "업그레이드"])
    ],
    "ESFJ": [
        ("홈 브런치 파티 🥞", "사람 모여 행복 지수↑.", ["환대", "공유", "감동"]),
        ("합창/앙상블 🎼", "조화의 기쁨, 무대의 설렘.", ["협업", "음악", "소속감"]),
        ("지역 봉사 🤗", "따뜻한 영향력 실천.", ["공감", "연대", "행동"])
    ],
    "ISTP": [
        ("클라이밍 🧗", "몸-두뇌 협업, 문제 풀이 쾌감.", ["실전", "몰입", "스릴"]),
        ("사진/드론 촬영 🚁", "기술+감각의 조합.", ["기술", "필드", "탐험"]),
        ("생존/캠핑 기술 ⛺", "도구 다루기의 끝.", ["야외", "스킬", "자립"])
    ],
    "ISFP": [
        ("도예/공예 🏺", "손끝의 감성, 하나뿐인 결과.", ["촉감", "미학", "힐링"]),
        ("플라워 디자인 💐", "색감과 균형의 직관.", ["자연", "감성", "표현"]),
        ("로파이 비트메이킹 🎧", "느긋한 흐름 속 창작.", ["음악", "솔로", "감성"])
    ],
    "ESTP": [
        ("익스트림 스포츠 🏄", "즉각적 피드백의 쾌감!", ["액션", "스릴", "순간"]),
        ("스피드보드게임/파티게임 🎉", "현장감과 텐션 업!", ["사교", "속도", "웃음"]),
        ("주식/암호화폐 모의투자 📈", "순간 판단과 실행.", ["전략", "경험", "데모"])
    ],
    "ESFP": [
        ("뮤지컬/퍼포먼스 🎤✨", "무대 위가 곧 내 세상!", ["표현", "에너지", "관객"]),
        ("패션 리폼 👗", "센스 있는 나만의 스타일.", ["DIY", "감각", "트렌드"]),
        ("파티 플래너 🎊", "사람과 순간을 빛내기.", ["커뮤니티", "기획", "행복"])
    ],
}

MBTI_ORDER = list(MBTI_HOBBIES.keys())

# ---------------------------
# 사이드바
# ---------------------------
with st.sidebar:
    st.markdown("## 🧭 사용 방법")
    st.write("1) MBTI를 고르고, 2) 추천 강도를 선택하면 끝!\n\n필요하면 **분위기**와 **예산**을 맞춤 설정하세요.")
    mood = st.select_slider("오늘의 분위기", options=["차분", "집중", "활동적", "사교적", "모험적"], value="집중")
    budget = st.select_slider("예산 감도(체감)", options=["무료 위주", "가성비", "상관없음"], value="가성비")
    allow_surprise = st.toggle("가끔은 깜짝 제안(🎁) 허용", value=True)
    st.divider()
    st.caption("💡 팁: 추천을 클릭하면 '시작 가이드'가 열립니다.")

# 세션 상태
if "fired" not in st.session_state:
    st.session_state.fired = False

# ---------------------------
#
